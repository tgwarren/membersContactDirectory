<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible content='IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Member Directory</title>
  <link rel="stylesheet" href="/styles.css">
</head>

<body>
  <h1>Member Directory</h1>

  <div id="member-details">
    <h2>Current Members</h2>
  </div>
  <div class="member-details">
    <p>Id</p>
    <p>Parent Name</p>
    <p>Daughter Name</p>
    <p>Address</p>
    <p>Email</p>
    <p>Phone Number</p>
  </div>
  <div id="member-info">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="/controllers/membersController.js"></script>
    <script>
      $(document).ready(function () {
        $.getJSON('http://localhost:3000/members', function (data) {

          // Loop through each member in the data
          data.forEach(function (member) {
            // Create a table row for the member
            let row = $('<div class="member-details"></div>');

            // Create a separate div for each member detail
            let id = $('<div class="member-details">' + member._id + '</div>');
            let parentName = $('<div class="member-details">' + member.parentName + '</div>');
            let daughterName = $('<div class="member-details">' + member.daughterName + '</div>');
            let address = $('<div class="member-details">' + member.address + '</div>');
            let email = $('<div class="member-details">' + member.email + '</div>');
            let phoneNumber = $('<div class="member-details">' + member.phoneNumber + '</div>');
            // Append each member detail to the row
            row.append(id);
            row.append(parentName);
            row.append(daughterName);
            row.append(address);
            row.append(email);
            row.append(phoneNumber);

            // Append the row to the member-info div
            $('#member-info').append(row);
          });
        })
          .fail(function (xhr, status, error) {
            console.error('Error fetching router data:', error);
          });
      });
    </script>
  </div>
  <div class="updates">
    <form class="member-form" id="add-member" action="/controllers/membersController.js" method="POST">
      <h2>Add Member</h2>
      <label for="parentName">Parent Name:</label>
      <input type="text" name="parentName" required>

      <label for="daughterName">Daughter Name:</label>
      <input type="text" name="daughterName" required>

      <label for="address">Address:</label>
      <input type="text" name="address">

      <label for="email">Email:</label>
      <input type="email" name="email" required>
      
      <label for="phoneNumber">Phone Number:</label>
      <input type="text" name="phoneNumber" required>

      <button type="submit" id=add-member class="button">Add</button> 
    </form>

    <form class="member-form" id="update-member" action="/controllers/membersController.js" method="PUT">
      <h2>Update Member</h2>
      <label for="id">Id</label>
      <input type="text" name="_id" required>

      <label for="parentName">Parent Name:</label>
      <input type="text" name="parentName" required>

      <label for="daughterName">Daughter Name:</label>
      <input type="text" name="daughterName" required>

      <label for="address">Address:</label>
      <input type="text" name="address">

      <label for="email">Email:</label>
      <input type="email" name="email" required>
      
      <label for="phoneNumber">Phone Number:</label>
      <input type="text" name="phoneNumber" required>

    <button type="submit" id="update-member" class="button">Update</button> 
    </form>

    
    <form class="member-form" id="delete-member" action="/controllers/membersController.js" method="DELETE">
      <h2>Delete Member</h2>
      <label for="id">Member ID:</label>
      <input type="text" name="_id" required>

    <button type="submit" id="delete-member" class="button">Delete</button>
    </form>
  </div>
</body>

</html>